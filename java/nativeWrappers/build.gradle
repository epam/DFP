plugins {
    id 'java-library'
}

repositories {
    mavenCentral()
}

sourceCompatibility = 1.8

task makeNativeWrappers(dependsOn: compileJava, type: JavaExec) {
    main = "com.epam.deltix.dfp.NativeWrappers"
    classpath = sourceSets.main.runtimeClasspath
    workingDir = "$rootDir"
    def ver = versioning()
    args = [ver["three"], ver["suffix"], ver["sha"]]
    onlyIf {
        !file("$rootDir/java/dfp/build/generated/sources/nativeWrappers/com/epam/deltix/dfp/NativeImpl.java").exists() ||
            !file("$rootDir/csharp/EPAM.Deltix.DFP/NativeImpl.cs").exists()
    }
}
